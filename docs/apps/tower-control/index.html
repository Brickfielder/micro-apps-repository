<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#111827" />

  <title>Tower Control — Mobile</title>
  <meta name="description" content="Mobile-adapted sketch of the Tower Control micro-app. Uses shared theme and frame." />

  <!-- Frame metadata so frame.js can read catalog and inject hero -->
  <meta name="app-slug" content="tower-control" />
  <!-- Optional theme toggles: <meta name="theme" content="bold dense"> -->
  <!-- Optional overrides:
  <meta name="app-title" content="Tower Control" />
  <meta name="app-desc" content="Handle aircraft according to active protocols. Mobile sketch." />
  -->

  <!-- Shared frame bootstraps theme.css and hero -->
  <script defer src="../shared/frame.js"></script>

  <style>
    :root { --radar-h: 260px; }

    /* App layout inside #app-root */
    .app {
      max-width: 560px;
      margin: 0 auto;
      display: grid;
      gap: clamp(12px, 1.2vw, 18px);
    }

    /* Simple panel card (can be moved to theme later) */
    .panel {
      background: var(--surface);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(16px, 2vw, 24px);
    }

    /* Radar */
    .radar {
      position: relative;
      height: var(--radar-h);
      border-radius: var(--radius);
      overflow: hidden;
      isolation: isolate;
      background-image:
        radial-gradient(circle at 50% 50%, transparent 0 1px, var(--surface) 1px 8%, transparent 8%),
        radial-gradient(circle at 50% 50%, transparent 0 1px, var(--surface) 1px 16%, transparent 16%),
        radial-gradient(circle at 50% 50%, transparent 0 1px, var(--surface) 1px 24%, transparent 24%),
        radial-gradient(circle at 50% 50%, var(--line) 0, var(--line) 1px, transparent 1px);
      background-size: 100% 100%;
      background-color: var(--surface);
    }
    .radar::before, .radar::after { content:""; position:absolute; inset:0; pointer-events:none; }
    .radar::before {
      background:
        linear-gradient(var(--line), var(--line)) 50% 0/1px 100% no-repeat,
        linear-gradient(var(--line), var(--line)) 0 50%/100% 1px no-repeat;
      opacity:.6;
    }
    @media (prefers-reduced-motion: no-preference){
      .radar::after{
        background: conic-gradient(from 0turn, color-mix(in lab, var(--accent), transparent 90%) 0turn, transparent .15turn);
        mix-blend-mode: plus-lighter;
        animation: sweep 3.6s linear infinite;
      }
      @keyframes sweep { to { transform: rotate(1turn); } }
    }

    .plane {
      position: absolute;
      translate: -50% -50%;
      font-size: 1.4rem;
      line-height: 1;
      filter: drop-shadow(0 1px 1px rgba(0,0,0,.25));
    }
    .plane[data-color="green"]  { color: #16a34a; }
    .plane[data-color="blue"]   { color: #2563eb; }
    .plane[data-color="yellow"] { color: #ca8a04; }

    /* Controls layout: use theme grid helpers + theme buttons */
    .controls { }
    @media (max-width:360px){ :root{ --radar-h: 220px; } }
  </style>
</head>
<body>
  <!-- frame.js will wrap this in .app-wrap and inject the .app-hero above it -->
  <div id="app-root">
    <main class="app" data-app-title="Tower Control" data-app-tags="executive, attention" data-app-version="mobile-1">

      <section class="panel radar" aria-label="Radar display" role="img">
        <!-- Static demo positions; your logic can update them -->
        <div class="plane" data-color="green"  style="left:24%; top:28%" aria-label="green aircraft">✈️</div>
        <div class="plane" data-color="blue"   style="left:76%; top:62%" aria-label="blue aircraft">✈️</div>
        <div class="plane" data-color="yellow" style="left:40%; top:70%" aria-label="yellow aircraft">✈️</div>
      </section>

      <section class="panel" id="task-panel" aria-labelledby="task-h">
        <h2 id="task-h">Task Queue</h2>
        <p id="task-text">Land blue, hold at waypoint 4, redirect yellow.</p>
      </section>

      <section class="panel" id="status-panel" aria-labelledby="status-h">
        <h2 id="status-h">Status</h2>
        <dl class="kv">
          <dt>Success rate</dt><dd><span id="succ">73%</span></dd>
          <dt>Completed</dt><dd><span id="done">11</span></dd>
          <dt>Failed</dt><dd><span id="fail">4</span></dd>
        </dl>
      </section>

      <section class="panel grid cols-2 controls" aria-label="Actions">
        <button type="button" class="button primary" data-action="clear"    aria-label="Clear for approach">CLEAR</button>
        <button type="button" class="button primary" data-action="land"     aria-label="Authorize landing">LAND</button>
        <button type="button" class="button primary" data-action="hold"     aria-label="Hold pattern">HOLD</button>
        <button type="button" class="button primary" data-action="redirect" aria-label="Redirect to alternate">REDIRECT</button>
      </section>

    </main>
  </div>

  <script>
    // Minimal wiring: forward button taps to your app logic if present
    (function(){
      const root = document.querySelector('.controls');
      root.addEventListener('click', (e) => {
        const b = e.target.closest('button[data-action]');
        if (!b) return;
        const action = b.dataset.action;
        if (window.app && typeof window.app.handleAction === 'function') {
          window.app.handleAction(action);
        } else if (window.frame && typeof window.frame.toast === 'function') {
          window.frame.toast(`Action: ${action}`);
        } else {
          console.log('Action:', action);
        }
      });
    })();
  </script>
</body>
</html>
```0